{% extends 'base.nav.html.twig' %}

{% block title %}Generare Smart{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <link href="{{ asset('lib/select2/dist/css/select2.min.css') }}" rel="stylesheet" />
{% endblock %}

{% block body %}
  <h2 class="coinyFont">Generare Smart</h2>
  {% for flashMessage in app.session.flashbag.get('error') %}
    <br>
    <div id="message">
    <div style="padding: 5px;">
        <div id="inner-message" class="alert alert-primary fade show">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{ flashMessage|nl2br }}
        </div>
    </div>
    </div>
  {% endfor %}
  <br>
  {{ form_start(form) }}
    <div style="max-width:400px;">
      {{ form_row(form.year_month) }}
      {{ form_row(form.school_year) }}
      {{ form_row(form.invoice_month) }}
    </div>
    <br>
    {{ form_label(form.stud_choice) }} <br>
    <div class="row">
      {% for f in form.stud_choice %}
        <div class="col-auto">
          {{ form_widget(f) }} {{ form_label(f) }}
        </div>
      {% endfor %}
    </div>
    
    <div id="smartGenStuds">
      <hr>
      <div class="form-group">
        {{ form_label(form.students) }}
        {{ form_widget(form.students) }}
      </div>
    </div>

    <hr>
    <div class="row">
      <div class="col-auto">
        {{ form_label(form.pay_item_type) }}
      </div>
      {% for f in form.pay_item_type %}
        <div class="col-auto">
          {{ form_widget(f) }} {{ form_label(f) }}
        </div>
      {% endfor %}
    </div>
    <div id="smartGenOptDates">
      <div class="row">
        <div class="col-6">
          {{ form_row(form.start_date) }}
        </div>
        <div class="col-6">
          {{ form_row(form.end_date) }}
        </div>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="col-12 col-md-6">
        {{ form_label(form.auto_invoice) }}
        <div class="row" id="autoInvoice">
          {% for f in form.auto_invoice %}
            <div class="col-auto">
              {{ form_widget(f) }} {{ form_label(f) }}
            </div>
          {% endfor %}
        </div>
      </div>
      <div class="col-12 col-md-6" id="smartGenInvoicing">
        {{ form_label(form.invoice_all) }}
        <div class="row">
          {% for f in form.invoice_all %}
            <div class="col-auto">
              {{ form_widget(f) }} {{ form_label(f) }}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div id="smartGenInvDate">
      <div class="row">
        <div class="col-12 col-md-6">
          {{ form_label(form.invoice_date) }}
          {{ form_widget(form.invoice_date) }}
          <br>
          {{ form_label(form.save_invoice) }}
          <span class="double2">{{ form_widget(form.save_invoice) }}</span>
        </div>
        <div class="col-12 col-md-6">
        </div>
      </div>
    </div>
    <br>
    <center>
      <button type="submit" class="btn btn-lg btn-success" id="submitBtn"><i class="fas fa-redo" id="icon"></i> GENERARE</button>
    </center>
  {{ form_end(form) }}

  <br>

{% endblock %}

{% block javascripts %}
  <script>
    var process_form_url = "{{ path('generate_invoices') }}";
  </script>
  <script src="{{ asset('lib/select2/dist/js/select2.min.js') }}"></script>
  <script src="{{ asset('js/smart_generate.js') }}"></script> 
{% endblock %}

